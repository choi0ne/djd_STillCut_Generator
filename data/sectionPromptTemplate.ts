/**
 * 섹션 일러스트 프롬프트 템플릿
 * 
 * ✅ styleLibrary.ts의 모든 17개 스타일에 대한 프롬프트 블록 정의
 * ✅ 스타일 선택 → 해당 블록으로 교체
 * ✅ 6개 섹션 모두 동일한 구조
 * ✅ 한글 프롬프트 통일
 */

// =============================================================================
// 🎨 스타일별 프롬프트 블록 (styleLibrary.ts의 모든 스타일 포함)
// =============================================================================

export const STYLE_PROMPT_BLOCKS: Record<string, string> = {
    // ----- 1. 아이소메트릭 인포그래픽 -----
    'isometric-infographic': `
아이소메트릭(등각투영) 3D 벡터 일러스트
- 45도 각도에서 본 미니어처 3D 오브젝트들
- 플랫한 면 + 미니멀한 한 방향 그림자
- 밝고 선명한 컬러 아이콘들 (빨강, 노랑, 초록, 파랑)
- 각 오브젝트는 작은 플랫폼 위에 배치
- 오브젝트들이 네트워크형으로 연결
`,

    // ----- 2. 인포그래픽 차트 -----
    'infographic-chart': `
플랫 벡터 인포그래픽 스타일
- 컬러풀한 막대 그래프/차트
- 남녀 실루엣 아이콘으로 인구/성별 표현
- 카테고리별 색상 구분 (그라데이션 가능)
- 데이터 라벨이 차트 옆에 배치
- 밝고 친근한 데이터 시각화
`,

    // ----- 3. 공감 캐릭터 -----
    'empathetic-character': `
플랫 일러스트 캐릭터 (말풍선 없음)
- 깔끔한 벡터 스타일, 그림자 없음
- 굵은 검정 외곽선(2-3px), 단색 플랫 컬러 채움
- 단순화된 얼굴 (큰 눈, 심플한 표정)
- 파스텔 또는 따뜻한 컬러 팔레트
- 증상 표현 포즈 (머리 짚기, 배 감싸기 등)
- 말풍선/텍스트 없음, 이미지로만 감정 전달
`,

    // ----- 4. 약재 스케치 -----
    'herbal-sketch': `
빈티지 잉크 드로잉 스타일
- 가는 펜촉으로 그린 듯한 세밀한 선화
- 해칭(빗금)과 크로스해칭으로 음영 표현
- 약병, 한약재(인삼, 감초), 저울, 허브 식물
- 흑백 기반 + 부분 수채화 컬러 (녹색 잎, 갈색 뿌리)
- 19세기 약학 도감 느낌
`,

    // ----- 5. 공감 컷툰 -----
    'empathetic-cutoon': `
플랫 일러스트 컷툰 (말풍선 있음)
- 깔끔한 벡터 스타일, 그림자 없음
- 굵은 검정 외곽선, 단색 플랫 컬러 채움
- 캐릭터가 화면 좌측 2/3 차지
- 우측 상단에 말풍선/생각풍선
- 둥근 고딕체로 2-3줄 짧은 대사
- 파스텔 또는 크림색 배경
`,

    // ----- 6. 예술적 썸네일 -----
    'artistic-thumbnail': `
미니멀 반추상 일러스트
- 주제를 상징하는 핵심 시각 요소 1-2개
- 깔끔한 벡터 또는 부드러운 텍스처
- 단순화된 형태, 과도한 디테일 없이
- 여백을 충분히 살린 미니멀 구도
- 우아하고 세련된 느낌
`,

    // ----- 7. 블로그 썸네일 -----
    'blog-thumbnail': `
세로형 블로그 썸네일 (2:3 비율)
- 상단 75%: 페이퍼크래프트 일러스트 (레이어드 종이 컷아웃)
- 하단 25%: 제목 텍스트 영역 (연한 크림색 배경)
- 따뜻한 파스텔 컬러 (연한 핑크, 민트, 베이지)
- 손으로 만든 듯한 핸드메이드 느낌
- 도현체 스타일 굵은 한글 고딕체
`,

    // ----- 8. 손그림 다이어그램 -----
    'hand-drawn-diagram': `
손그림 느낌의 다이어그램
- 검정 잉크 펜으로 그린 듯한 스케치 라인
- 둥근 사각형 박스들이 화살표로 연결
- 각 박스 안에 심플한 아이콘 (구름, 저울, 위장 등)
- 선 굵기 1-2px, 약간의 손떨림 텍스처
- 노트북/메모장 위에 그린 느낌
`,

    // ----- 9. 의학 일러스트레이션 -----
    'medical-illustration': `
부드러운 수채화/파스텔 톤 해부학적 일러스트
- 장기를 교육적이면서 따뜻하게 묘사
- 가는 검정 외곽선 + 부드러운 색상 (베이지, 살색, 연핑크)
- 좌우 비교 구조 권장 (건강 vs 질환)
- 화살표로 설명 라벨 연결
- 환자가 이해하기 쉬운 교육용
`,

    // ----- 10. 개념적 은유 -----
    'conceptual-metaphor': `
미니멀 장기 실루엣 + 수묵화 텍스처 (동양적 느낌)
- 장기(위장, 폐, 뇌 등)를 검정 외곽선(2-3px)으로 단순하게 드로잉
- 장기 내부에 수묵화/먹 번짐 텍스처로 상태 표현
  (예: 담적 → 어두운 먹 침전, 염증 → 붉은 번짐, 건강 → 옅은 그라데이션)
- 동양화 특유의 농담(濃淡) 표현 - 진하고 옅음의 자연스러운 변화
- 장기 외부는 비워두거나 최소한의 요소만
- 한지 질감의 크림색/오프화이트 배경 (#F5F0E8)
- 하단에 굵은 명조체 한글 제목
- 절제되고 세련된 미학
`,

    // ----- 11. 2D 스텝 다이어그램 -----
    '2d-step-diagram': `
깔끔한 2D 벡터 인포그래픽
- 플랫 디자인, 그림자 없음
- 둥근 사각형/원형 블록에 숫자 또는 아이콘
- 화살표로 스텝 간 연결 (3-5개 스텝)
- 각 블록에 다른 파스텔 색상
- 환자가 한눈에 따라할 수 있는 가이드
`,

    // ----- 12. 페이퍼크래프트 일러스트 -----
    'papercraft-illustration': `
레이어드 페이퍼크래프트 3D 일러스트
- 종이를 오려 붙인 듯한 질감과 층
- 부드러운 그림자로 입체감
- 따뜻한 파스텔 (연핑크, 민트, 베이지)
- 장기/신체를 귀엽고 친근하게 단순화
- 핸드메이드 느낌, 밝은 배경
`,

    // ----- 13. 미니멀 웰니스 포토 -----
    'minimal-wellness-photo': `
하이키 미니멀리스트 사진 스타일
- 허브차, 약재, 건강 음식
- 자연광, 밝고 깔끔한 톤
- 텍스처 있는 밝은 회색 표면
- 텍스트/사람 없음
- 세련되고 감성적인 웰니스 느낌
`,

    // ----- 14. 연속 한 줄 드로잉 -----
    'continuous-line-drawing': `
연속적인 한 줄 드로잉
- 선이 끊기지 않고 전체 형태 표현
- 검정색 얇은 선 (1-2px)
- 인체 측면 프로필 + 내부 장기/뇌
- 채색 없이 선만으로 표현
- 미니멀하고 추상적, 우아한 아트
`,

    // ----- 15. 개념적 스케치 -----
    'conceptual-sketch': `
연필/목탄 스케치 스타일
- 손그림 느낌의 거친 선
- 모노크롬 (흑백 또는 세피아)
- 단순화된 스틱맨 또는 간단한 인물
- 추상적 개념을 시각적 은유로 (갈림길, 무거운 짐 등)
- 철학적 메시지, 오프화이트 종이 배경
`,

    // ----- 16. 텍스처 디지털 페인팅 -----
    'textured-digital-painting': `
파스텔/색연필 느낌의 디지털 페인팅
- 고운 입자의 종이 텍스처 오버레이
- 부드러운 포커스, 따뜻한 톤
- 아날로그적인 질감
- 은은하고 감성적인 분위기
- 거친 엣지 없이 부드럽게
`,

    // ----- 17. 정밀 의학도 -----
    'precision-medical': `
의학 교과서 스타일 정밀 해부학
- Netter's Atlas 참고
- 정확한 해부학적 비율, 섬세한 명암
- 색상 코딩: 동맥(빨강), 정맥(파랑)
- 화살표 + 리더 라인으로 라벨 연결
- 전문적이고 교육적인 임상 수준
`,

    // ----- 18. 섹션 일러스트 -----
    'section-illustration': `
파스텔 배너 스타일 섹션 일러스트

[사이즈] 가로형 배너 (16:9 또는 3:1 비율)

[그림체]
- 플랫 벡터 일러스트, 그림자 없음
- 굵은 검정 외곽선(2-3px)
- 단색 플랫 컬러 채움
- 귀여운 캐릭터 (큰 머리, 심플한 표정, 동그란 눈)
- 캐릭터 크기는 화면의 40-50%

[레이아웃]
- 좌측: 캐릭터가 증상/감정을 표현하는 포즈
- 우측: 말풍선에 핵심 메시지 (2-3단어)
- 블로그 본문 중간에 삽입하는 시각적 구분선 역할

[색상]
- 파스텔 그라데이션 배경 (핑크→연보라, 민트→하늘색)
- 캐릭터: 따뜻한 피부톤, 파스텔 의상 (핑크, 민트, 연노랑)
- 말풍선: 흰색 또는 연한 크림색

[글씨체]
- 말풍선 내: 둥근 고딕체 (도현체 스타일)
- 검정색 또는 진한 회색

[분위기] 친근하고 귀여운 느낌. 무겁지 않은 시각적 휴식. 환자가 공감할 수 있는 캐릭터.
`,

    // ----- 20. 플랫 일러스트 -----
    'flat-illustration': `
깔끔한 플랫 벡터 일러스트
- 외곽선 없이 단색 면으로만 구성
- 그라데이션/그림자 없음
- 매우 단순화된 얼굴 (점 눈, 코 없음, 곡선 미소)
- 파스텔 의상 (핑크, 민트, 연보라)
- Adobe Stock 스타일, 깔끔한 흰색 배경
`,

    // ----- 20. 포스터 -----
    'poster': `
세로형 홍보 포스터 (2:3 비율)
- 3단 구조: 상단 키워드 / 중앙 비주얼 / 하단 메시지
- 깊은 네이비 그라데이션 배경
- 벡터 실루엣 일러스트, 밝은 청록색 포인트
- 굵은 세리프체 또는 도현체 제목
- 전문적이고 치유적인 클리닉 느낌
`,

    // ----- 21. 운동법 가이드 -----
    'exercise-guide': `
심플한 라인 드로잉 운동 가이드
- 깔끔한 검정 외곽선 인체
- 민트/청록색 상의 + 검정 하의
- 동작 방향을 청록색 화살표로 표시
- 가로 3단 배열 (시작→중간→완료)
- 직관적인 재활운동/홈트 가이드
`,

    // ----- 22. 블로그템플릿_미니멀 -----
    'blog-thumbnail-minimal': `
미니멀 의학 라인아트 스타일 (네이버 블로그 썸네일용)
[사이즈] ⭐ 세로형 2:3 비율, 800x1200px
[안전 영역] 중요 텍스트는 중앙에 배치 (다양한 비율로 잘려도 보이도록)

[그림체]
- 가는 검정 외곽선(1-2px)으로 장기/인체 부위를 심플하게 드로잉
- 채색 없이 선만으로 형태 표현
- 장기 주변에 파란색/청록색 스플래터, 연기, 입자 효과
- 수채화 번짐 또는 잉크 스플래시 느낌
- 2-3색 제한 (검정 라인 + 파란색/청록색 + 선택적 주황/베이지)

[레이아웃]
- 장기(위장, 폐, 뇌 등) 또는 인체 부분이 중앙에 배치
- 스플래터/연기 효과가 장기 주변을 감싸거나 퍼짐
- 미니멀한 크림색/오프화이트 배경(#F5F0E8)
- 하단에 한글 제목 배치

[글씨체] ⭐ 굵은 나눔명조 필수
- 제목: 나눔명조 ExtraBold (굵은 명조체)
- 검정색(#333333)
- 메인 제목: 큰 사이즈, 굵은 웨이트
- 부제: 작은 사이즈, 나눔명조 Regular
- 예시: "40대 만성 기침, 답은 체질에 있었습니다."

[분위기] 개념적이고 추상적인 의학 일러스트. 환자 친화적이면서 전문적. 깔끔하고 세련된 느낌.
`,

    // ----- 23. 플로잉 스월 일러스트 -----
    'flowing-swirl-illustration': `
유기적 흐름 라인아트 스타일
[그림체]
- 한 점에서 시작해 자연스럽게 퍼져나가는 곡선들
- 소용돌이, 물방울, 스플래터 효과
- 보타니컬 요소(나뭇잎, 식물)와 추상적 곡선 결합
- 2-3색 제한 (검정, 녹색/청록, 파랑)
- 가는 선에서 굵은 선으로 변화하는 다이나믹한 표현

[레이아웃]
- 좌측 또는 중앙 하단에서 시작점
- 우측 또는 상단으로 확산
- 미니멀한 크림/오프화이트 배경
- 하단에 한글 제목

[글씨체] 굵은 명조체(Bold Serif), 검정색

[분위기] 위미컬하고 환상적인 느낌. 호흡기/순환기 관련 주제에 적합.
`,

    // ----- 24. 실루엣 해부학 -----
    'silhouette-anatomy': `
개념적 실루엣 해부학 스타일
[그림체]
- 인체 측면 또는 정면 실루엣
- 단색 그라데이션으로 채움 (파란색, 청록색 계열)
- 실루엣 내부에 장기/기관 표현 (폐, 기관지, 위, 심장)
- 기관지는 나무 뿌리처럼 아래로 뻗어나가는 형태
- 입/코에서 입자, 스플래터, 연기 효과로 증상 표현

[레이아웃]
- 실루엣이 화면 중앙에 배치
- 미니멀한 크림/오프화이트 배경
- 하단에 한글 제목과 부제

[글씨체] 굵은 명조체(Bold Serif), 검정색

[분위기] 개념적이고 교육적. 호흡기, 소화기, 순환기 주제에 적합.
`,

    // ----- 25. 의료 스캔 비주얼 -----
    'medical-scan-visual': `
의료 스캔 이미지 스타일 (CT/MRI/X-ray)
[그림체]
- 원형 또는 타원형 스캔 이미지 프레임
- 회색/청록색 톤의 스캔 이미지
- 진단 포인트에 화살표 또는 마커 표시
- 나침반, 돋보기 등 진단 아이콘 배치 가능

[레이아웃]
- 스캔 이미지가 중앙 또는 상단에 배치
- 다크 그린/네이비 또는 밝은 크림 배경
- 하단에 한글 제목과 설명

[글씨체] 굵은 고딕체, 흰색 또는 검정색

[분위기] 전문적인 진단/검진 느낌. 폐, 간, 뇌 등 영상의학 주제에 적합.
`
};

// =============================================================================
// 섹션 타이틀 매핑
// =============================================================================

export const SECTION_TITLE_KOREAN: Record<string, string> = {
    'Answer First': '핵심 결론',
    'Action': '즉각 실천',
    'Warning': '위험 신호',
    'The Why': '상세 원인',
    'Proof': '사례와 근거',
    'Closing': '마무리'
};

// =============================================================================
// 팔레트 색상 정의
// =============================================================================

export const PALETTE_COLORS: Record<string, { primary: string; secondary: string; accent: string; background: string }> = {
    'medical': {
        primary: '#5C7AEA (차분한 파랑)',
        secondary: '#E8EDF5 (연한 회색빛 파랑)',
        accent: '#3D5AF1 (진한 파랑)',
        background: '#F8FAFF (밝은 흰색)'
    },
    'calm': {
        primary: '#7CB8B6 (차분한 청록)',
        secondary: '#E8F4F3 (연한 민트)',
        accent: '#5BA8A6 (진한 청록)',
        background: '#FAFEFE (부드러운 흰색)'
    },
    'warm': {
        primary: '#E8A87C (따뜻한 살구색)',
        secondary: '#FFF4EC (연한 베이지)',
        accent: '#D4845C (진한 테라코타)',
        background: '#FFFBF8 (크림색)'
    }
};

// =============================================================================
// 프롬프트 생성 함수
// =============================================================================

export interface SectionPromptInput {
    sectionNumber: number;
    sectionTitle: string;
    imageSceneDescription: string;  // Stage 7에서 생성된 장면 묘사
    recommendedPalette: 'medical' | 'calm' | 'warm';
}

/**
 * 🎨 섹션 일러스트 프롬프트 생성
 * 
 * @param section - 섹션 정보 (Stage 7에서 생성)
 * @param styleId - 선택된 스타일 ID
 * @returns 완성된 한글 프롬프트
 */
export function generateSectionPrompt(
    section: SectionPromptInput,
    styleId: string
): string {
    const titleKorean = SECTION_TITLE_KOREAN[section.sectionTitle] || section.sectionTitle;
    const styleBlock = STYLE_PROMPT_BLOCKS[styleId] || STYLE_PROMPT_BLOCKS['section-illustration'];
    const palette = PALETTE_COLORS[section.recommendedPalette] || PALETTE_COLORS['medical'];

    // Proof 섹션은 캐릭터 없음
    const characterNote = section.sectionTitle === 'Proof'
        ? '【인물】 인물 없음 - 데이터/차트 중심'
        : '【인물】 30대 성인, 캐주얼 복장 (의사/한의사 절대 금지)';

    return `
【섹션 ${section.sectionNumber}】 ${titleKorean}

【스타일】
${styleBlock.trim()}

【색상】
- 메인: ${palette.primary}
- 보조: ${palette.secondary}
- 강조: ${palette.accent}
- 배경: ${palette.background}

${characterNote}

【장면 묘사】
${section.imageSceneDescription}

【필수 제외】
- 의사, 한의사, 의료진 절대 금지
- 흰 가운, 청진기, 주사기 금지
- 병원/진료실 배경 금지
`.trim();
}

/**
 * 6개 섹션 프롬프트 일괄 생성
 */
export function generateAllSectionPrompts(
    sections: SectionPromptInput[],
    styleId: string
): string[] {
    return sections.map(section => generateSectionPrompt(section, styleId));
}
